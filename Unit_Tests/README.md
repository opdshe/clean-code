# 👨🏻‍💻 단위 테스트
## 단위 테스트를 왜 해야하는가 ?
테스트 케이스가 없다면 **모든 변경이 잠정적인 버그가 될 수 있다.** 내가 추구하는 서비스 회사는 처음 기획했던 기능을 모두 구현하는 것이 목표가 아니다. 더 개선할 점을 찾고, 새로운 기능을 추가하고, 필요없는 부분은 들어내기도 하면서 **수정을 반복하면서 더 좋은 서비스를 제공하기위해 끊임없이 다듬어야 한다.** 이러한 상황에서 테스크 코드를 작성하지 않는다면? 변경사항이 생겼고 에러가 발생한다면, 어디에서 왜 에러가 발생하는 지 디버깅하는 데 엄청난 시간을 쏟아부어야 할 것이다. 하지만 테스트 코드를 꾸준히 작성해왔다면 에러의 원인을 발견하는 것은 매우 간단한 작업이다. 귀찮아 하지말고 작성하자. 미래의 나를 위해서.  
<br>  

## TDD 법칙 세가지
- 첫째: 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.  
  (실제, 백기선님의 라이브 강의를 보면 테스트 코드를 먼저 작성하고, 테스트가 실패하는 것을 보고 해당 로직의 프로덕션 코드를 작성한다)  
  
- 둘째: 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다  
- 셋째: 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다  
  (프로덕션 코드를 먼저 작성하고 테스트 코드를 나중에 한 번에 작성하는 것을 방지하기 위해)  
<br>  

## 테스트 코드를 먼저 작성하는 이유
- 어떤 기능이 구현되어야 하는지, 어떤 예외상황을 테스트해야 하는지 미리 정의해두고 개발에 임하기 때문에 개발의 방향성을 잡을 수 있다
- 성취감을 부여함으로써 개발의 능률 향상
- 개발 패턴을 짧게 가져감으로써 개발 집중력 향상

## 깨끗한 테스트 코드를 유지하자
테스트 코드도 **코드 품질을 신경쓰며 작성해야 한다.** 프로덕션 코드가 수정되면 당연히 테스트 코드에도 수정이 필요할 수도 있다. 테스트 코드가 복잡할수록 테스트 케이스를 수정하는 데 걸리는 시간이 늘어난다. 지저분한 테스트케이스는 수정이 불가능한 지경에 이를지도 모른다. 이러한 상황에 놓인다면, 이것은 테스트 코드를 작성 안하는 것 보다 못하다. 시간은 시간대로 들어가고, 작성했던 코드가 모두 의미가 없어진다. 따라서, **테스트 코드 또한 깨끗한 상태를 유지할 필요가 있다.**  
<br>


## 테스트 코드를 잘 작성하는 법
깨끗한 테스트 코드를 작성하기 위해서는 세 가지가 필요하다. **가독성, 가독성, 가독성.** 명료하면서도, 단순하고하게 작성해야 한다.  
- 테스트 당 **assert는 하나만** 작성할 것  
  (꼭 하나가 아니더라도 최대한 줄이려고 노력하자)  
- 하나의 테스트는 세부분으로 분리하자  
  - **given**: 테스트 자료 초기화   
  - **when**: 테스트 자료 조작    
  - **then**: 조작한 결과가 올바른지 확인  
  
- **테스트 당 개념 하나**  
- **테스트는 빨라야 한다.**  
- **테스트는 서로 의존하면 안된다**  
  실제로 Junit으로 테스트를 실행하면, 각 테스트 실행 순서가 랜덤하다. **하나의 테스트가 다른 테스트에 영향을 주어서는 안된다**   
<br>

  
### ✨ 테스트는 빨라야 좋은 것은 알겠는데, 정확성은 ??
실제로 프로젝트를 진행하다가 했던 고민 중 하나이다. 예를 들어, 게시글 작성 기능이 잘 동작하는 지 확인하는 테스크 코드를 작성한다고 가정하자. 이 때 **Controller** 수준에서 테스트 하는 방법이 있고, 
**Service** 수준에서 테스트 하는 방법이 있다. 현직에서 일하는 중인 지인에게 물어봤을 때는 Service 수준에서 테스트를 진행한다고 한다. 이유는 Controller 수준에서 테스트를 진행하면 실제로 HTTP 요청을 보내고 응답을 받아야해서 **느리기 때문이다.** 하지만 문득, Service 수준에서 테스트를 통과한다고 그것이 해당 기능을 제대로 구현했다는 것을 보장할 수 있는 지 의문이 들었다. 이 부분에 대해서는 여러 사람의 의견을 들어보며 조금 더 고민해 보는 시간을 갖는 것이 좋을 듯 하다.


